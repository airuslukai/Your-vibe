<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eternal Muse | For My Dearest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400;0,700;1,400&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <script type="importmap">
    {
      "imports": {
        "@react-three/fiber": "https://esm.sh/@react-three/fiber@^9.0.0",
        "@react-three/drei": "https://esm.sh/@react-three/drei@^10.0.0",
        "framer-motion": "https://esm.sh/framer-motion@^12.0.0",
        "three": "https://esm.sh/three@^0.182.0",
        "lucide-react": "https://esm.sh/lucide-react@^0.475.0",
        "react": "https://esm.sh/react@^19.2.3",
        "react-dom": "https://esm.sh/react-dom@^19.2.3",
        "react-dom/client": "https://esm.sh/react-dom@^19.2.3/client",
        "@google/genai": "https://esm.sh/@google/genai@^1.3.0",
        "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
        "react/": "https://esm.sh/react@^19.2.3/"
      }
    }
    </script>
  </head>
  <body>
    <div class="nebula-bg">
      <div class="nebula-cloud"></div>
    </div>
    <div class="love-rain-container" id="love-rain"></div>
    <div class="vignette"></div>
    <div id="root"></div>

    <script>
      // Optimization: Only run animations if page is visible
      let isVisible = true;
      document.addEventListener("visibilitychange", () => {
        isVisible = document.visibilityState === 'visible';
      });

      const rainContainer = document.getElementById('love-rain');
      const symbols = ['â¤ï¸', 'ðŸ’–', 'ðŸŒ¸', 'ðŸŒ¹', 'âœ¨', 'ðŸ’•', 'ðŸ’', 'ðŸ•Šï¸', 'ðŸ’—'];
      
      function createRainDrop() {
        if (!isVisible) return; 
        
        const drop = document.createElement('div');
        const symbol = symbols[Math.floor(Math.random() * symbols.length)];
        drop.className = 'falling-heart';
        drop.innerText = symbol;
        
        const size = Math.random() * 25 + 15;
        const duration = Math.random() * 8 + 12;
        const drift = (Math.random() * 300 - 150) + 'px';
        const left = Math.random() * 100 + 'vw';
        const opacity = Math.random() * 0.4 + 0.3;
        
        drop.style.fontSize = size + 'px';
        drop.style.left = left;
        drop.style.color = Math.random() > 0.5 ? '#ff4d6d' : '#ffb7d5';
        drop.style.filter = `blur(${Math.random() * 2}px) drop-shadow(0 0 10px rgba(255, 77, 109, 0.5))`;
        drop.style.setProperty('--duration', duration + 's');
        drop.style.setProperty('--drift', drift);
        drop.style.setProperty('--max-op', opacity);
        
        rainContainer.appendChild(drop);
        
        // Cleanup
        setTimeout(() => {
          if (drop.parentNode === rainContainer) {
            rainContainer.removeChild(drop);
          }
        }, duration * 1000);
      }

      // Initial dense batch for immediate impact
      for(let i=0; i<40; i++) {
        setTimeout(createRainDrop, Math.random() * 5000);
      }

      // Continuous flow - lowered frequency for performance
      setInterval(createRainDrop, 600);
    </script>
  <script type="module" src="/index.tsx"></script>
</body>
</html>